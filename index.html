<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>í”„ë¦¬ë¯¸ì—„ ê²Œì„ ì„¼í„°</title>
  <style>
    :root { 
      --naver-green: #03c75a; --bg-gray: #0b0f14; --text-white: #e6eef9; --accent: #6ee7ff;
    }
    body { 
      margin:0; font-family: 'Malgun Gothic', sans-serif; background: var(--bg-gray); color: var(--text-white);
      overflow-x: hidden;
    }

    /* ê³µí†µ ì´ë¯¸ì§€ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .img-btn {
      background-size: 100% 100%; background-repeat: no-repeat; background-position: center;
      border: none; cursor: pointer; display: flex; align-items: center; justify-content: center;
      color: white; font-weight: bold; text-shadow: 1px 1px 2px rgba(0,0,0,0.8); transition: 0.2s;
      background-color: transparent;
    }
    .img-btn:hover { transform: scale(1.03); filter: brightness(1.1); }

    /* 1. ë©”ì¸ í˜ì´ì§€ (ëŒ€í˜• ì´ë¯¸ì§€ ë°°ê²½) */
    #mainPage {
      height: 100vh; width: 100%;
      background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.7)), 
                  url('https://images.unsplash.com/photo-1614850523296-d8c1af93d400?auto=format&fit=crop&w=1600&q=80');
      background-size: cover; background-position: center;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
    }
    #mainPage h1 { font-size: 3rem; margin-bottom: 50px; text-shadow: 0 4px 10px rgba(0,0,0,0.5); }
    .main-selector { display: flex; gap: 40px; }
    .menu-card {
      width: 220px; height: 300px; background: rgba(255,255,255,0.1);
      backdrop-filter: blur(15px); border: 2px solid var(--accent); border-radius: 20px;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      cursor: pointer; transition: 0.3s;
    }
    .menu-card:hover { transform: translateY(-10px); background: rgba(110, 231, 255, 0.2); }
    .menu-card i { font-size: 60px; margin-bottom: 20px; }

    /* 2. ê²Œì„ í˜ì´ì§€ ê³µí†µ */
    #gamePage { display: none; padding: 20px; min-height: 100vh; text-align: center; position: relative; }
    .back-btn { 
      position: absolute; top: 20px; left: 20px; width: 100px; height: 40px; border: 1px solid var(--accent) !important;
      background-image: url(''); /* BACK ë²„íŠ¼ ì´ë¯¸ì§€ ì£¼ì†Œ */
    }

    /* ì‚¬ë‹¤ë¦¬ ë ˆì´ì•„ì›ƒ */
    .preset-btns { display: flex; gap: 12px; justify-content: center; margin: 30px 0; }
    .btn-835 { width: 150px; height: 55px; background-image: url(''); }
    .btn-1435 { width: 150px; height: 55px; background-image: url(''); }
    .btn-3535 { width: 150px; height: 55px; background-image: url(''); }
    .btn-18335 { width: 150px; height: 55px; background-image: url(''); }

    .ladder-board { position: relative; display: inline-block; margin-top: 20px; }
    .label-grid { display: flex; width: 800px; justify-content: space-around; margin: 10px 0; }
    .input-box { flex: 1; display: flex; justify-content: center; }
    .input-box input {
      width: 70px; padding: 8px 0; background: #1a222d; color: white;
      border: 1px solid #3d4b5d; border-radius: 6px; text-align: center; font-size: 14px;
    }
    canvas { background: transparent; display: block; z-index: 1; position: relative; }
    #playerPiece {
      position: absolute; width: 28px; height: 28px;
      background-image: url('https://cdn-icons-png.flaticon.com/128/802/802340.png');
      background-size: contain; background-repeat: no-repeat;
      display: none; z-index: 10; pointer-events: none; transform: translate(-50%, -100%);
    }

    /* 3. ì£¼ì‚¬ìœ„ ê²Œì„ (ì¤‘ì•™ ë°°ì¹˜) */
    .dice-container {
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      min-height: 80vh;
    }
    .dice-row { display: flex; gap: 40px; margin-bottom: 40px; }
    .dice {
      width: 120px; height: 120px; background: white; border-radius: 20px;
      position: relative; box-shadow: 0 10px 20px rgba(0,0,0,0.3);
      background-size: cover; background-position: center;
    }
    .dot { width: 20px; height: 20px; background: #333; border-radius: 50%; position: absolute; transform: translate(-50%, -50%); }
    .roll-btn { width: 220px; height: 65px; background-image: url(''); font-size: 20px; border: 1px solid white !important; }

    .rolling { animation: shake 0.1s infinite; }
    @keyframes shake { 0% {transform:rotate(0deg)} 50% {transform:rotate(5deg)} 100% {transform:rotate(-5deg)} }
  </style>
</head>
<body>

  <div id="mainPage">
    <h1>GAME CENTER</h1>
    <div class="main-selector">
      <div class="menu-card" onclick="showGame('ladder')"><i>ğŸªœ</i><h2>ì‚¬ë‹¤ë¦¬ íƒ€ê¸°</h2></div>
      <div class="menu-card" onclick="showGame('dice')"><i>ğŸ²</i><h2>ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°</h2></div>
    </div>
  </div>

  <div id="gamePage">
    <button class="back-btn img-btn" onclick="goHome()">BACK</button>
    
    <div id="ladderGame" style="display:none;">
      <div class="preset-btns">
        <button class="img-btn btn-835" onclick="applyPreset('835', 5)">ğŸ˜ˆ 835 ğŸ˜ˆ</button>
        <button class="img-btn btn-1435" onclick="applyPreset('1435', 5)">ğŸ‘¼ 1435 ğŸ‘¼</button>
        <button class="img-btn btn-3535" onclick="applyPreset('3535', 4)">ğŸ‘ 3535 ğŸ‘</button>
        <button class="img-btn btn-18335" onclick="applyPreset('18335', 3)">â¤ï¸ 18335 â¤ï¸</button>
      </div>
      <div class="ladder-board">
        <div id="topInputs" class="label-grid"></div>
        <div style="position: relative;">
          <div id="playerPiece"></div>
          <canvas id="ladderCanvas" width="800" height="450"></canvas>
        </div>
        <div id="bottomInputs" class="label-grid"></div>
      </div>
      <br><button class="img-btn" onclick="generateLadder()" style="width:200px; height:60px; border:1px solid white !important; margin: 20px auto;">ì‚¬ë‹¤ë¦¬ ìƒì„±</button>
    </div>

    <div id="diceGame" class="dice-container" style="display:none;">
      <div class="dice-row">
        <div id="dice1" class="dice"></div>
        <div id="dice2" class="dice"></div>
      </div>
      <button class="img-btn roll-btn" onclick="rollDices()">ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸°</button>
    </div>
  </div>

<script>
  const canvas = document.getElementById('ladderCanvas');
  const ctx = canvas.getContext('2d');
  const piece = document.getElementById('playerPiece');
  let state = { n: 5, h: 12, links: [], isMoving: false };

  function showGame(type) {
    document.getElementById('mainPage').style.display = 'none';
    document.getElementById('gamePage').style.display = 'block';
    document.getElementById('ladderGame').style.display = type === 'ladder' ? 'block' : 'none';
    document.getElementById('diceGame').style.display = type === 'dice' ? 'block' : 'none';
    if(type === 'ladder') applyPreset('835', 5);
    if(type === 'dice') { drawDice(1, 'dice1'); drawDice(1, 'dice2'); }
  }

  function goHome() {
    document.getElementById('mainPage').style.display = 'flex';
    document.getElementById('gamePage').style.display = 'none';
  }

  // --- ì‚¬ë‹¤ë¦¬ ë¡œì§ ---
  function getX(idx) { return (canvas.width / state.n) * idx + (canvas.width / state.n / 2); }
  function applyPreset(name, count) {
    state.n = count;
    const topRow = document.getElementById('topInputs'), botRow = document.getElementById('bottomInputs');
    topRow.innerHTML = ''; botRow.innerHTML = '';
    for(let i=0; i<count; i++) {
      topRow.innerHTML += `<div class="input-box"><input type="text" value="${i+1}" onclick="startLadder(${i})"></div>`;
      botRow.innerHTML += `<div class="input-box"><input type="text" value="?"></div>`;
    }
    generateLadder();
  }
  function generateLadder() {
    state.links = Array.from({length: state.h}, () => []);
    for(let y=0; y<state.h; y++) {
      for(let x=0; x<state.n-1; x++) if(Math.random() < 0.5) { state.links[y].push(x); x++; }
    }
    drawLadder();
  }
  function drawLadder() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.strokeStyle = '#3d4b5d'; ctx.lineWidth = 2;
    for(let i=0; i<state.n; i++) {
      ctx.beginPath(); ctx.moveTo(getX(i), 0); ctx.lineTo(getX(i), canvas.height); ctx.stroke();
    }
    ctx.strokeStyle = '#6ee7ff'; ctx.lineWidth = 4;
    const dy = canvas.height / (state.h + 1);
    state.links.forEach((row, y) => {
      row.forEach(x => {
        ctx.beginPath(); ctx.moveTo(getX(x), (y+1)*dy); ctx.lineTo(getX(x+1), (y+1)*dy); ctx.stroke();
      });
    });
  }
  async function startLadder(idx) {
    if(state.isMoving) return; state.isMoving = true;
    const dy = canvas.height / (state.h + 1);
    let curCol = idx, curX = getX(curCol), curY = 0;
    piece.style.display = 'block';
    for(let y=0; y<state.h; y++) {
      await animate(curX, (y+1)*dy); curY = (y+1)*dy;
      let nx = curX;
      if(state.links[y].includes(curCol)) { curCol++; nx = getX(curCol); }
      else if(state.links[y].includes(curCol-1)) { curCol--; nx = getX(curCol); }
      if(nx !== curX) { await animate(nx, curY); curX = nx; }
    }
    await animate(curX, canvas.height); state.isMoving = false;
  }
  function animate(tx, ty) {
    return new Promise(res => {
      const sx = parseFloat(piece.style.left || 0), sy = parseFloat(piece.style.top || 0);
      const start = performance.now();
      function step(now) {
        const p = Math.min((now - start) / 120, 1);
        piece.style.left = sx + (tx-sx)*p + 'px'; piece.style.top = sy + (ty-sy)*p + 'px';
        if(p < 1) requestAnimationFrame(step); else res();
      }
      requestAnimationFrame(step);
    });
  }

  // --- ì£¼ì‚¬ìœ„ ë¡œì§ ---
  const diceImgPaths = { 1:'', 2:'', 3:'', 4:'', 5:'', 6:'' }; 
  function drawDice(num, id) {
    const el = document.getElementById(id);
    el.innerHTML = '';
    if(diceImgPaths[num]) { el.style.backgroundImage = `url('${diceImgPaths[num]}')`; return; }
    el.style.backgroundImage = 'none';
    const dots = {
      1: [[50,50]], 2: [[25,25], [75,75]], 3: [[25,25], [50,50], [75,75]],
      4: [[25,25], [25,75], [75,25], [75,75]], 5: [[25,25], [25,75], [50,50], [75,25], [75,75]],
      6: [[25,25], [25,50], [25,75], [75,25], [75,50], [75,75]]
    };
    dots[num].forEach(pos => {
      const d = document.createElement('div'); d.className = 'dot';
      d.style.left = pos[0]+'%'; d.style.top = pos[1]+'%'; el.appendChild(d);
    });
  }
  function rollDices() {
    const d1 = document.getElementById('dice1'), d2 = document.getElementById('dice2');
    d1.classList.add('rolling'); d2.classList.add('rolling');
    setTimeout(() => {
      const v1 = Math.floor(Math.random()*6)+1, v2 = Math.floor(Math.random()*6)+1;
      drawDice(v1, 'dice1'); drawDice(v2, 'dice2');
      d1.classList.remove('rolling'); d2.classList.remove('rolling');
    }, 600);
  }
</script>
</body>
</html>
